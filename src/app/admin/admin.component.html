<div class="adminContainer">
  <div class="formLoginAdminContainer" *ngIf="!fireService.loggedAdmin; else dashboard">
    <h3 class="formLoginAdminContainer-title">ADMIN</h3>
    <form (ngSubmit)="adminLogin(model); adminLoginForm.reset()" #adminLoginForm="ngForm" class="contactoForms">
        <input type="email" id="userAdmin" placeholder="Usuario" required [(ngModel)]="model.usuario" name="mail">
        <input type="password" placeholder="ContraseÃ±a" id="passAdmin" required [(ngModel)]="model.contrasena" name="content">
        <button type="submit" [disabled]="!adminLoginForm.form.valid">Entrar</button>
    </form>
  </div>

  <ng-template #dashboard>
    <div  class="adminDashboard">
      <div class="selectorPanel">
        <h2>Mails</h2>
        <h3 *ngFor="let mail of allMails" (click)="selectedChat = null; selectedMail = mail">{{mail.mail}}</h3>
        <h2>Chats</h2>
        <h3 *ngFor="let chat of allchats" (click)="selectedMail = null; selectedChat = chat">{{chat.user}}</h3>
      </div>
      <div class="contentMessagesAndMails">
        <div *ngIf="selectedMail; else chatContainer">
          <h4 *ngFor="let messageMail of selectedMail.message">{{messageMail}}</h4>
          <a [href]="'mailto:' + selectedMail.mail"><button>Responder</button></a>
        </div>
        <ng-template  #chatContainer>
          <ng-container *ngIf="selectedChat">
          <div class="chatContactContainer">
            <h2 *ngFor="let message of selectedChat.chat" ngClass="{{(message.by == 'user')? 'userContactMessage': 'adminMessage'}}">{{message.message}}</h2>
          </div>
          <div class="inputChatContactDiv"><input type="text" placeholder="Escribe un Mensaje" #box (keyup)="onKey(box.value)"><button type="button" (click)="sendChatMessage(); box.value = ''">send</button></div>
          </ng-container>
        </ng-template>
      </div>
    </div>
  </ng-template>

</div>
